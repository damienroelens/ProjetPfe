(function(t){"use strict";function e(e){r.geocode({location:e},function(e,a){if(a===google.maps.GeocoderStatus.OK){t(".date input[type=text]").val(e[0].formatted_address);var n=new Date,i=n.getMonth()+1,l=n.getDate(),s=n.getFullYear(),o=n.getHours(),r=n.getMinutes();t(".date input[type=time]").val(o+":"+r),t(".date input[type=date]").val(l+"/"+i+"/"+s)}else window.alert(a)})}function a(t){o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),s.panTo(o),s.setZoom(17),d.setMap(s),d.setIcon("http://googlemaps.googlermania.com/img/google-marker-big.png"),d.setShadow("http://googlemaps.googlermania.com/img/google-marker-big-shadow.png"),d.setPosition(o)}function n(t){window.alert("Erreur : "+t.message)}function i(){navigator.geolocation.getCurrentPosition(a,n,{timeout:2e4,maximumAge:2e4})}function l(){if(window.localStorage.getItem("allDonn")){var e=JSON.parse(window.localStorage.getItem("allDonn")),a=e.arrDonn;t(".prop fieldset input:nth-child(3)").val(a.nom),t(".prop fieldset input:nth-child(5)").val(a.prenom),t(".prop fieldset input:nth-child(7)").val(a.adresse),t(".prop fieldset input:nth-child(9)").val(a.postal),t(".prop fieldset input:nth-child(11)").val(a.pays),t(".prop fieldset input:nth-child(13)").val(a.tel);var n=e.arrVehi;t(".vehi fieldset input:nth-child(3)").val(n.marque),t(".vehi fieldset input:nth-child(5)").val(n.numimm),t(".vehi fieldset input:nth-child(7)").val(n.paysimm);var i=e.arrAssu;t(".assu fieldset input:nth-child(3)").val(i.nomas),t(".assu fieldset input:nth-child(5)").val(i.numcont),t(".assu fieldset input:nth-child(7)").val(i.numcart),t(".assu fieldset input:nth-child(9)").val(i.agence),t(".assu fieldset input:nth-child(11)").val(i.adresseas),t(".assu fieldset input:nth-child(13)").val(i.telas);var l=e.arrCond;t(".condu fieldset input:nth-child(3)").val(l.nomco),t(".condu fieldset input:nth-child(5)").val(l.prenomco),t(".condu fieldset input:nth-child(7)").val(l.naissance),t(".condu fieldset input:nth-child(9)").val(l.adresseco),t(".condu fieldset input:nth-child(11)").val(l.telco),t(".condu fieldset input:nth-child(13)").val(l.numperm),t(".condu fieldset input:nth-child(15)").val(l.typeperm)}navigator.splashscreen.hide()}var s,o,r,d=new google.maps.Marker({map:s,draggable:!0}),c=function(){s=new google.maps.Map(document.getElementById("gmap"),{center:new google.maps.LatLng(50.833,4.333),zoom:10,scrollwheel:!1,draggable:!0,disableDoubleClickZoom:!0,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP})};t(function(){t(".buttonNext").on("click",function(){var a=t("nav a.active").attr("class");a=/^[\w]+/.exec(a)[0];var n=t("#"+a+" div.etape");if(n.attr("style")){var i=/\d{1,4}\%/.exec(n.attr("style")),l=parseInt(i[0].substring(0,i[0].length-1))+100;if(n.css({"-webkit-transform":"translateX(-"+l+"%)"}),"1200%"==i[0]&&"declaration"==a&&t(".buttonNext").hide(),"200%"==i[0]&&"profil"==a&&t(".buttonNext").hide(),"100%"==i[0]&&"declaration"==a){var s=d.getPosition();e(s)}}else n.css({"-webkit-transform":"translateX(-100%)"});t(".buttonPrev").show()}),t(".buttonConfirm").on("click",function(){t("#declaration div.etape").css({"-webkit-transform":"translateX(-100%)"}),i(),t(".buttonPrev").show(),t(".buttonNext").show()}),t("#profil input[type=submit]").on("click",function(e){e.preventDefault();var a={arrDonn:{nom:t(".prop fieldset input:nth-child(3)").val(),prenom:t(".prop fieldset input:nth-child(5)").val(),adresse:t(".prop fieldset input:nth-child(7)").val(),postal:t(".prop fieldset input:nth-child(9)").val(),pays:t(".prop fieldset input:nth-child(11)").val(),tel:t(".prop fieldset input:nth-child(13)").val()},arrVehi:{marque:t(".vehi fieldset input:nth-child(3)").val(),numimm:t(".vehi fieldset input:nth-child(5)").val(),paysimm:t(".vehi fieldset input:nth-child(7)").val()},arrAssu:{nomas:t(".assu fieldset input:nth-child(3)").val(),numcont:t(".assu fieldset input:nth-child(5)").val(),numcart:t(".assu fieldset input:nth-child(7)").val(),agence:t(".assu fieldset input:nth-child(9)").val(),adresseas:t(".assu fieldset input:nth-child(11)").val(),telas:t(".assu fieldset input:nth-child(13)").val()},arrCond:{nomco:t(".condu fieldset input:nth-child(3)").val(),prenomco:t(".condu fieldset input:nth-child(5)").val(),naissance:t(".condu fieldset input:nth-child(7)").val(),adresseco:t(".condu fieldset input:nth-child(9)").val(),telco:t(".condu fieldset input:nth-child(11)").val(),numperm:t(".condu fieldset input:nth-child(13)").val(),typeperm:t(".condu fieldset input:nth-child(15)").val()}};window.localStorage.setItem("allDonn",JSON.stringify(a)),window.alert("Données enregistrées !")}),t(".buttonPrev").on("click",function(){if(t("nav a").hasClass("active")){var e=/^[\w-]+/.exec(t("nav a.active").attr("class"))[0],a=t("#"+e+" div.etape"),n=/\d{1,4}\%/.exec(a.attr("style")),l=parseInt(n[0].substring(0,n[0].length-1))-100;a.css({"-webkit-transform":"translateX(-"+l+"%)"}),0===l&&(t(".buttonPrev").hide(),"declaration"==e&&t(".buttonNext").hide()),"200%"==n[0]&&"declaration"==e&&i(),"1300%"==n[0]&&"declaration"==e&&t(".buttonNext").show(),"300%"==n[0]&&"profil"==e&&t(".buttonNext").show()}}),t("p.resu").on("click",function(){var e=/[\w]+$/.exec(t(this).attr("class")),a=e[0];switch(a){case"donn":t("#declaration div.etape").css({"-webkit-transform":"translateX(-400%)"});break;case"circ":t("#declaration div.etape").css({"-webkit-transform":"translateX(-1100%)"});break;case"croq":t("#declaration div.etape").css({"-webkit-transform":"translateX(-1200%)"});break;case"phot":t("#declaration div.etape").css({"-webkit-transform":"translateX(-1300%)"}),t("buttonNext").hide()}}),t("nav a").on("click",function(e){e.preventDefault(),t("nav a").removeClass("active");var a=t(this).attr("class");t(this).addClass("active");var n=t("section");switch(a){case"declaration":n.css({"-webkit-transform":"translateY(-100%)"}),t("#declaration div.etape").attr("style")&&"0%"!=/\d{1,4}\%/.exec(t("#declaration div.etape").attr("style"))?(t(".buttonPrev").show(),"1300%"!==/\d{1,4}\%/.exec(t("#declaration div.etape").attr("style"))[0]?t(".buttonNext").show():t(".buttonNext").hide()):(t(".buttonPrev").hide(),t(".buttonNext").hide());break;case"profil":n.css({"-webkit-transform":"translateY(-200%)"}),t(".buttonNext").show(),t("#profil div.etape").attr("style")&&"0%"!=/\d{1,4}\%/.exec(t("#profil div.etape").attr("style"))?(t(".buttonPrev").show(),"300%"!==/\d{1,4}\%/.exec(t("#profil div.etape").attr("style"))[0]?t(".buttonNext").show():t(".buttonNext").hide()):t(".buttonPrev").hide();break;case"assistance":n.css({"-webkit-transform":"translateY(-300%)"}),t(".buttonPrev").filter(":visible")&&t(".buttonPrev").hide(),t(".buttonNext").filter(":visible")&&t(".buttonNext").hide();break;case"options":n.css({"-webkit-transform":"translateY(-400%)"}),t(".buttonPrev").filter(":visible")&&t(".buttonPrev").hide(),t(".buttonNext").filter(":visible")&&t(".buttonNext").hide()}}),r=new google.maps.Geocoder,c(),setTimeout(function(){document.addEventListener("deviceready",l,!1)},2e3)})}).call(this,jQuery);